---
title: "describe univariate for camera data set"
author: "Sascha Siegmund"
date: "`r Sys.Date()`"
output: 
  github_document:
    fig_width: 10
    fig_height: 7
---

```{r, echo = FALSE}
knitr::opts_chunk$set(
  fig.path = "nb_figs/uni_",
  warning = FALSE
)
```



## purpose of notebook

  - [ ] describe & visualize single variables (univariate)
  - [ ] gather interesting observations for further investigation
  - [ ] gather possible new features for extraction
  
  
## insights 

  - brand column shows the count of cameras per brand, over 50% are produced by just 5 brands: Olympus, Sony, Canon, Kodak, Fujifilm
  - uni release_date: with increasing year the number of cameras in the data also increase, almost linear, this could be a sign of more cameras available on the market or just from the data acquisition 
  - comparing max_resolution and low_resolution shows that on median, the max resolution is higher, but both have a big spike around 2560 (resp 2592)
  - effective_pixels range between 0 and 13, mostly around 4 to 6, with two big spikes at 1 and 3
  - zoom_wide_W and zoom_tele_t are really far spread out but mostly centered around peaks, for zoom_wide_w its 28, 35, 38, for zoom_tele_t its 105a nd 114


## load packages

```{r load packages, setup, message=FALSE}
library(tidyverse) # tidy data frame
library(ggthemes) # for extra plot themes
library(plotly) # make ggplots interactive
```


## import data

```{r, message=FALSE}
df <- read_csv(file = '../data/camera_dataset_processed.csv') %>% column_to_rownames(var = 'model')
```


## overview

```{r}
head(df)
```
```{r}
summary(df)
```


## univariate categorical brand

- brand column shows the count of cameras per brand, over 50% are produced by just 5 brands: Olympus, Sony, Canon, Kodak, Fujifilm

```{r}
# one variable, categorical x, show distribution
name = 'brand'
tmp_df <- df %>% rename(value = brand) %>% select(value)

p1 <- tmp_df %>%
  ggplot(aes(x = fct_infreq(value))) +
    geom_bar() +
    theme_minimal() +
    theme(axis.text.x = element_text(angle=45, vjust=0.7, size=10))
p1 <- ggplotly(p1) %>% layout()

p2 <- tmp_df %>%
  ggplot(aes(x = 1, y = fct_infreq(value))) +
    geom_boxplot() +
    theme_minimal() +
    coord_flip() +
    ggtitle(paste("distribution of", name, sep=" ")) +
    theme(axis.text.x = element_text(angle=45, vjust=0.7, size=10))
p2 <- ggplotly(p2) %>% layout(yaxis = list(showticklabels = FALSE, showgrid = FALSE))

# https://plotly.com/r/subplots/
fig <- subplot(p1, p2, nrows = 2, margin = 0, heights = c(0.85, 0.15), shareX = TRUE) %>% 
  layout(xaxis = list(title = name))

fig
```
```{r}
# one variable, categorical x, 
# comparing the distribution of a variable against a hypothetical uniform distribution of that variable
name = c('camera count', 'brand share')
tmp_df <- df %>% rename(value = brand) %>% select(value)

library(gglorenz) #transformations for plotting Lorenz curve, https://github.com/jjchern/gglorenz

p1 <- tmp_df %>% 
  ggplot(aes(as.numeric(fct_infreq(value)))) +
    stat_lorenz(desc = FALSE) +
    coord_fixed() +
    geom_abline(linetype = 'dashed') +
    theme_minimal() +
    hrbrthemes::scale_x_percent() +
    hrbrthemes::scale_y_percent() +
    annotate_ineq(as.numeric(fct_infreq(tmp_df$value))) +
    ggtitle(paste("Lorenz curve for", name[1], sep=" ")) 
fig <- ggplotly(p1) %>% 
  layout(yaxis = list(title = paste("cumulative percentage of", name[1], sep=" ")), 
         xaxis = list(title = paste("cumulative percentage of", name[2], sep=" "))) 

fig
```


## univariate numeric release_date

- uni release_date: with increasing year the number of cameras in the data also increase, almost linear, this could be a sign of more cameras available on the market or just from the data acquisition  

```{r}
# one variable, continuous x, show distribution
name = 'release_date'
tmp_df <- df %>% rename(value = release_date) %>% select(value)

# https://ggplot2.tidyverse.org/reference/geom_dotplot.html
p1 <- tmp_df %>%
  ggplot(aes(x = value)) +
    # geom_density() +
    geom_histogram(binwidth = 1) +
    theme_minimal()  
p1 <- ggplotly(p1) %>% layout()

p2 <- tmp_df %>%
  ggplot(aes(x = 1, y = value)) +
    geom_boxplot() +
    theme_minimal() +
    coord_flip() +
    ggtitle(paste("distribution of", name, sep=" ")) 
p2 <- ggplotly(p2) %>% layout(yaxis = list(showticklabels = FALSE, showgrid = FALSE))

# https://plotly.com/r/subplots/
fig <- subplot(p1, p2, nrows = 2, margin = 0, heights = c(0.8, 0.2), shareX = TRUE) %>% 
  layout(xaxis = list(title = name))

fig
```


## compare univariate max_resolution and low_resolution

- comparing max_resolution and low_resolution shows that on median, the max resolution is higher, but both have a big spike around 2600

```{r}
# two variables, both continuous x, compare distributions
name = c('max_resolution', 'low_resolution')
tmp_df <- df %>% rename(max_res = max_resolution, low_res = low_resolution) %>%
  select(max_res, low_res) %>% pivot_longer(cols = c(max_res, low_res))

# https://ggplot2.tidyverse.org/reference/geom_dotplot.html
p1 <- tmp_df %>%
  ggplot(aes(x = value, fill = name)) +
    # geom_density(aes(colour = name), alpha = 0.5) +
    geom_histogram(binwidth = 100, alpha = 0.5, position = "identity") +
    theme_minimal() 
p1 <- ggplotly(p1) %>% layout()

p2 <- tmp_df %>%
  ggplot(aes(x = name, y = value, colour = name)) +
    geom_boxplot() +
    theme_minimal() +
    coord_flip() +
    ggtitle(paste("compare ", name[1], "and", name[2], sep=" ")) 
p2 <- ggplotly(p2) %>% layout(yaxis = list(showticklabels = FALSE, showgrid = FALSE))

# https://plotly.com/r/subplots/
fig <- subplot(p1, p2, nrows = 2, margin = 0, heights = c(0.8, 0.2), shareX = TRUE) %>%
  layout(xaxis = list(title = paste(name[1], "<br>", name[2], sep="")))

fig
```


## univariate numeric effective_pixels

- effective_pixels range between 0 and 13, mostly around 4 to 6, with two big spikes at 1 and 3

```{r}
# one variable, continuous x, show distribution
name = 'effective_pixels'
tmp_df <- df %>% rename(value = effective_pixels) %>% select(value)

# https://ggplot2.tidyverse.org/reference/geom_dotplot.html
p1 <- tmp_df %>%
  ggplot(aes(x = value)) +
    # geom_density() +
    geom_histogram(binwidth = 1) +
    theme_minimal()  
p1 <- ggplotly(p1) %>% layout()

p2 <- tmp_df %>%
  ggplot(aes(x = 1, y = value)) +
    geom_boxplot() +
    theme_minimal() +
    coord_flip() +
    ggtitle(paste("distribution of", name, sep=" ")) 
p2 <- ggplotly(p2) %>% layout(yaxis = list(showticklabels = FALSE, showgrid = FALSE))

# https://plotly.com/r/subplots/
fig <- subplot(p1, p2, nrows = 2, margin = 0, heights = c(0.8, 0.2), shareX = TRUE) %>% 
  layout(xaxis = list(title = name))

fig
```


## compare univariate zoom_wide_w and zoom_tele_t

- zoom_wide_W and zoom_tele_t are really far spread out but mostly centered around peaks, for zoom_wide_w its 28, 35, 38, for zoom_tele_t its 105a nd 114

```{r}
# two variables, both continuous x, compare distributions
name = c('zoom_wide_w', 'zoom_tele_t')
tmp_df <- df %>% rename(wide = zoom_wide_w, tele = zoom_tele_t) %>%
  select(wide, tele) %>% pivot_longer(cols = c(wide, tele))

# https://ggplot2.tidyverse.org/reference/geom_dotplot.html
p1 <- tmp_df %>%
  ggplot(aes(x = value, fill = name)) +
    # geom_density(aes(colour = name), alpha = 0.5) +
    geom_histogram(binwidth = 1, alpha = 0.5, position = "identity") +
    theme_minimal() 
p1 <- ggplotly(p1) %>% layout()

p2 <- tmp_df %>%
  ggplot(aes(x = name, y = value, colour = name)) +
    geom_boxplot() +
    theme_minimal() +
    coord_flip() +
    ggtitle(paste("compare ", name[1], "and", name[2], sep=" ")) 
p2 <- ggplotly(p2) %>% layout(yaxis = list(showticklabels = FALSE, showgrid = FALSE))

# https://plotly.com/r/subplots/
fig <- subplot(p1, p2, nrows = 2, margin = 0, heights = c(0.8, 0.2), shareX = TRUE) %>%
  layout(xaxis = list(title = paste(name[1], "<br>", name[2], sep="")))

fig
```


## compare univariate normal_focus_range and macro_focus_range

- 

```{r}
# two variables, both continuous x, compare distributions
name = c('normal_focus_range', 'macro_focus_range')
tmp_df <- df %>% rename(normal = normal_focus_range, macro = macro_focus_range) %>%
  select(normal, macro) %>% pivot_longer(cols = c(normal, macro))

# https://ggplot2.tidyverse.org/reference/geom_dotplot.html
p1 <- tmp_df %>%
  ggplot(aes(x = value, fill = name)) +
    # geom_density(aes(colour = name), alpha = 0.5) +
    geom_histogram(binwidth = 1, alpha = 0.5, position = "identity") +
    theme_minimal() 
p1 <- ggplotly(p1) %>% layout()

p2 <- tmp_df %>%
  ggplot(aes(x = name, y = value, colour = name)) +
    geom_boxplot() +
    theme_minimal() +
    coord_flip() +
    ggtitle(paste("compare ", name[1], "and", name[2], sep=" ")) 
p2 <- ggplotly(p2) %>% layout(yaxis = list(showticklabels = FALSE, showgrid = FALSE))

# https://plotly.com/r/subplots/
fig <- subplot(p1, p2, nrows = 2, margin = 0, heights = c(0.8, 0.2), shareX = TRUE) %>%
  layout(xaxis = list(title = paste(name[1], "<br>", name[2], sep="")))

fig
```





